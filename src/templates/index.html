{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold mb-3">Dobrodošli v MarinKino</h1>
        <p class="lead text-muted">Središče kvalitetnega digitalnega razvedrila</p>
    </div>

    <div class="counter-cards row g-4">
        <!-- Filmi -->
        <div class="col-md-6 col-lg-4">
            <a href="/movies?onlyrecommended=on" class="text-decoration-none">
                <div class="card h-100 shadow-lg border-0 card-hover">
                    <div class="card-body d-flex flex-column align-items-center justify-content-center text-center" style="background: var(--vijolicna-background);">
                        <div class="stat-icon mb-3">
                            <i class="bi bi-film" style="color: var(--vijolicna-background-text);"></i>
                        </div>
                        <div class="stat-number display-2 fw-bold text-white">
                            <span class="counter" data-target="{{ movies_count }}">0</span>
                        </div>
                        <p class="card-text text-white-50 fs-5 mb-0">Filmov</p>
                    </div>
                </div>
            </a>
        </div>

        <!-- Trajanje filmov -->
        <div class="col-md-6 col-lg-4">
            <a href="/movies?onlyrecommended=on" class="text-decoration-none">
                <div class="card h-100 shadow-lg border-0 card-hover">
                    <div class="card-body d-flex flex-column align-items-center justify-content-center text-center" style="background: var(--roza-background);">
                        <div class="stat-icon mb-3">
                            <i class="bi bi-clock-history" style="color: var(--roza-background-text);"></i>
                        </div>
                        <div class="stat-number display-2 fw-bold text-white">
                            <span class="counter" data-target="{{ movies_duration }}">0</span>
                        </div>
                        <p class="card-text text-white-50 fs-5 mb-0">Ur filmov</p>
                    </div>
                </div>
            </a>
        </div>

        <!-- Risanke -->
        <div class="col-md-6 col-lg-4">
            <a href="/movies?movietype=01-zbirke-risank" class="text-decoration-none">
                <div class="card h-100 shadow-lg border-0 card-hover">
                    <div class="card-body d-flex flex-column align-items-center justify-content-center text-center" style="background: var(--modra-background);">
                        <div class="stat-icon mb-3">
                            <i class="bi bi-play-circle" style="color: var(--modra-background-text);"></i>
                        </div>
                        <div class="stat-number display-2 fw-bold text-white">
                            <span class="counter" data-target="{{ cartoons_count }}">0</span>
                        </div>
                        <p class="card-text text-white-50 fs-5 mb-0">Zbirk risank</p>
                        <div class="stat-number display-2 fw-bold text-white">
                            <span class="counter" data-target="{{ cartoons_duration }}">0</span>
                        </div>
                        <p class="card-text text-white-50 fs-5 mb-0">Ur risank</p>
                    </div>
                </div>
            </a>
        </div>

        <!-- Memi -->
        <div class="col-md-6 col-lg-4">
            <a href="/memes" class="text-decoration-none">
                <div class="card h-100 shadow-lg border-0 card-hover">
                    <div class="card-body d-flex flex-column align-items-center justify-content-center text-center" style="background: var(--oranzna-background);">
                        <div class="stat-icon mb-3">
                            <i class="bi bi-emoji-smile" style="color: var(--oranzna-background-text);"></i>
                        </div>
                        <div class="stat-number display-2 fw-bold text-white">
                            <span class="counter" data-target="{{ memes_count }}">0</span>
                        </div>
                        <p class="card-text text-white-50 fs-5 mb-0">Šal (meme)</p>
                    </div>
                </div>
            </a>
        </div>

        <!-- Glasba -->
        <div class="col-md-6 col-lg-4">
            <a href="/music" class="text-decoration-none">
                <div class="card h-100 shadow-lg border-0 card-hover">
                    <div class="card-body d-flex flex-column align-items-center justify-content-center text-center" style="background: var(--modrikasta-background);">
                        <div class="stat-icon mb-3">
                            <i class="bi bi-music-note-beamed" style="color: var(--modrikasta-background-text);"></i>
                        </div>
                        <div class="stat-number display-2 fw-bold text-dark">
                            <span class="counter" data-target="{{ music_count }}">0</span>
                        </div>
                        <p class="card-text text-dark-50 fs-5 mb-0">Skladb</p>
                    </div>
                </div>
            </a>
        </div>

        <!-- Družabna igra -->
        <div class="col-md-6 col-lg-4">
            <a href="/pod_krinko" class="text-decoration-none">
                <div class="card h-100 shadow-lg border-0 card-hover">
                    <div class="card-body d-flex flex-column align-items-center justify-content-center text-center" style="background: var(--marelicna-background);">
                        <div class="stat-icon mb-3">
                            <i class="bi bi-people" style="color: var(--marelicna-background-text);"></i>
                        </div>
                        <div class="stat-number display-2 fw-bold text-dark">
                            Pod krinko
                        </div>
                        <p class="card-text text-dark-50 fs-5 mb-0">Besedna družabna igra</p>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Animate numbers when page loads
    const counters = document.querySelectorAll('.counter');
    
    counters.forEach(counter => {
        const target = parseInt(counter.getAttribute('data-target'));
        if (target === 0) return;
        if (isNaN(target)) {
            counter.textContent = "-";
            return;
        }
        
        const duration = 2000; // 2 seconds
        const increment = target / (duration / 50); // Update every 50ms
        let current = 0;
        
        const updateCounter = () => {
            current += increment;
            if (current < target) {
                counter.textContent = Math.floor(current);
                setTimeout(updateCounter, 50);
            } else {
                counter.textContent = target;
            }
        };
        
        updateCounter();
    });
});
</script>
{% endblock %}
